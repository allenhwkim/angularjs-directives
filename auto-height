/**
 * Usage:
 *  <textarea auto-height>\n\n\n\n\n\n\n\n\n\n\n\n\n\n</div>
 */
app.directive('autoHeight', function($timeout) {
  return {
    restrict: 'A',
    link: function($scope, elem, attrs) {
      $timeout( function() { // Expand the textarea as soon as it is added to the DOM
        if (elem.val()) {
          var height = elem[0].scrollHeight + 2;
          elem.css({height:height+'px'});
        }
      }, 0);
    }
  };
});
