var NGD=NGD||angular.module("ngd",[]);NGD.directive("ngdAutoHeight",function(){return{restrict:"A",link:function(e,n){setTimeout(function(){if(n.val()){var e=n[0].scrollHeight;n.css({height:e+"px"})}},0)}}});var NGD=NGD||angular.module("ngd",[]);NGD.directive("ngdCode",function(){return{restrict:"A",link:function(e,n){var t=n.html();t=t.replace(/^[\r\n]/,""),t=t.replace(/[\r\n]\s+$/,"");var r=t.match(/^\s+/);if(r){var i=new RegExp("^"+r,"gm");t=t.replace(i,"")}n.html(t)}}});var NGD=NGD||angular.module("ngd",[]);NGD.directive("ngdEnter",["$parse","$rootScope",function(e,n){return{restrict:"A",link:function(t,r,i){var o=e(i.ngdEnter);r.on("keypress",function(e){if(13===e.which){var r=function(){o(t,{$event:e})};n.$$phase?t.$evalAsync(r):t.$apply(r)}})}}}]);var NGD=NGD||angular.module("ngd",[]);NGD.directive("ngdImageDrop",["$parse",function(e){return{restrict:"A",link:function(n,t,r){var i=e(r.ngdImageDrop);t.bind("dragover",function(e){e.preventDefault(),t.addClass("dragover")}),t.bind("dragleave",function(e){e.preventDefault(),angular.element(document.body).removeClass("dragover")}),t.bind("drop",function(e){e.preventDefault(),t.removeClass("dragover");for(var r=[],o=0;o<e.dataTransfer.files.length;o++)e.dataTransfer.files[o].type.match("image")&&r.push(e.dataTransfer.files[o]);r.length>0&&(n.$emit("ngd-image-dropped",{files:r.length?r:[r]}),n.$apply(i(n)));var a=e.dataTransfer.getData("URL");a.match(/\.(png|gif|jpg)$/)&&(n.$emit("ngd-image-dropped",{url:a}),n.$apply(i(n)))})}}}]);var NGD=NGD||angular.module("ngd",[]);NGD.directive("ngdImagePaste",function(e){return{restrict:"A",link:function(n,t,r){var i=e(r.ngdImagePaste);t.bind("paste",function(){for(var e=[],t=(event.clipboardData||event.originalEvent.clipboardData).items,r=0;r<t.length;r++)t[r].getAsFile().type.match("image")&&e.push(t[r].getAsFile());e.length>0&&(n.$emit("ngd-image-dropped",{files:e}),n.$apply(i(n)))})}}});var NGD=NGD||angular.module("ngd",[]);NGD.directive("ngdImagePreview",function(){return{restrict:"A",link:function(e,n,t){e.$on("ngd-image-dropped",function(e,r){var i=function(e){var n=t.ngdImagePreviewWidth,r=t.ngdImagePreiewHeight,i=new Image;return i.src=e,n&&(i.width=n),r&&(i.height=r),i},o=function(e){var t=i(e.target.result),r=n[0].querySelector('img[src="'+e.target.result+'"]');r||n[0].appendChild(t)};if(r.files)for(var a=0;a<r.files.length;a++){var l=r.files[a],d=new FileReader;d.onload=o,d.readAsDataURL(l)}else if(r.url){var c=n[0].querySelector('img[src="'+r.url+'"]');if(!c){var s=i(r.url);n[0].appendChild(s)}}})}}});var NGD=NGD||angular.module("ngd",[]);NGD.directive("ngdMarkdown",function(){if(!Markdown.Converter)throw'no Markdown.Converter.js included. please add script tag with "http://cdnjs.cloudflare.com/ajax/libs/pagedown/1.0/Markdown.Converter.js"';var e=new Markdown.Converter;return{link:function(n,t,r){n.markdowns=n.markdowns||{};var i=r.ngdMarkdown;n.markdowns[i]=t,n.ngdMarkdown={preview:function(t,r){var i=n.markdowns[t];if(!i)throw"no markdown element found by key, "+t;var o=r||"",a=e.makeHtml(o);angular.element(i).html(a)}}}}});var NGD=NGD||angular.module("ngd",[]);NGD.directive("ngdOverlay",["$compile","$window",function(e,n){return{link:function(t,r,i){var o=i.ngdOverlay,a=(i.ngdOverlayStyle,void 0===i.ngdOverlayNocss),l=r[0].querySelector(".ngd-overlay-contents");if(!l){var d="<div class='ngd-overlay-contents'>"+r.html()+"</div>";r.html(d),e(r.contents())(t)}r.css({display:"none",top:0,left:0,zIndex:100,background:a&&"rgba(0,0,0,0.5)"}),t.ngdOverlays=t.ngdOverlays||{},t.ngdOverlays[o]=r,t.ngdOverlay={show:function(e,i){var o=t.ngdOverlays[e],l=void 0!==window.pageXOffset,d="CSS1Compat"===(document.compatMode||""),c=l?window.pageXOffset:d?document.documentElement.scrollLeft:document.body.scrollLeft,s=l?window.pageYOffset:d?document.documentElement.scrollTop:document.body.scrollTop;if("string"==typeof i&&(i=document.querySelector(i)),!i)throw"invalid overlay target given, "+i;document.querySelector("body").appendChild(r[0]);var u,g=i.getBoundingClientRect();if(o){"BODY"==i.tagName?(o.css({position:"fixed",display:"block",top:0,left:0,width:"100%",height:"100%"}),u=n.innerHeight,targetElWidth=n.innerWidth):(o.css({position:"absolute",display:"block",top:s+g.top+"px",left:c+g.left+"px",width:g.width+"px",height:g.height+"px"}),u=g.height,targetElWidth=g.width);var p=o[0].querySelector(".ngd-overlay-contents"),v=a?{background:"#fff",display:"inline-block",position:"absolute",textAlign:"center",minWidth:"300px",minHeight:"100px"}:{};angular.element(p).css(v);var f=p.getBoundingClientRect();angular.extend(v,{top:Math.max((u-f.height)/2,0)+"px",left:Math.max((targetElWidth-f.width)/2,0)+"px"}),angular.element(p).css(v)}},hide:function(e){var n=t.ngdOverlays[e];n&&n.css({position:null,display:"none",width:null,height:null,zindex:null})}}}}}]);var NGD=NGD||angular.module("ngd",[]);NGD.directive("ngdPlnkrScope",function(){var e=function(e){var n='<link rel="stylesheet" href="'+e+'"/>',t='<script src="'+e+'"></script>';return e.match(/\.css$/)?n:t};return{controller:["$scope",function(){this.html=null,this.js=null,this.css=null,this.libs=["script.js","style.css"],this.submitToPlnkr=function(e){var n=document.createElement("form");n.style.display="none",n.target="_blank",n.method="post",n.action="http://plnkr.co/edit/?p=preview";for(var t in e)if(t){var r=document.createElement("input");r.type="hidden",r.name=t,r.value=e[t],n.appendChild(r)}n.submit(),n.remove()},this.getPostData=function(){var n=this.html,t=this.js||"",r=this.css,i=this.moduleName;t=t.replace(/,[ '"]*plunkr['"]?/,"");for(var o=[],a=0;a<this.libs.length;a++){var l=this.libs[a];o.push(e(l))}var d={};return d.description="AngularJS Google Maps Directive",d.private=!0,d["tags[]"]="auglarjs",d["files[script.js]"]=t,d["files[style.css]"]=r,d["files[index.html]"]='<!doctype html>\n<html ng-app="'+i+'">\n  <head>\n'+o.join("\n")+"\n  </head>\n  <body>\n"+n+"\n  </body>\n</html>\n",d}}]}}),NGD.directive("ngdPlnkrCode",function(){return{require:"^ngdPlnkrScope",compile:function(e){return{pre:function(n,t,r,i){var o=r.ngdPlnkrCode,a=e.html();i[o]=a}}}}}),NGD.directive("ngdPlnkrLib",function(){return{require:"^ngdPlnkrScope",compile:function(){return{pre:function(e,n,t,r){var i=t.src||t.href;r.libs.push(i)}}}}}),NGD.directive("ngdPlnkrEdit",function(){return{require:"^ngdPlnkrScope",link:function(e,n,t,r){n.on("click",function(){var e=r.getPostData();r.submitToPlnkr(e)})}}}),NGD.directive("ngdPlnkrShow",["$compile","$timeout",function(e,n){var t='<style>\n  .tabs {position: relative; top: 1px}\n  .tabs::after {display:table; content:""; clear:both}\n  .tabs a {display:block; background:#ccc; float:left; padding: 5px; border:1px solid #333; border-bottom:none}\n  .tabs a:not(:first-child) {border-left: none}\n  .tabs a.hide {display:none}\n  .tabs a.active {background: #fff;}\n  .tab-contents {border: 1px solid #333}\n  .tab-contents * {width: 100%; white-space: pre; font:0.9em Courier New; overflow:auto}\n</style>\n<div>\n  <div class="tabs" ng-init="tab=1">\n    <a ng-class="{active:tab==1,hide:!html}" ng-click="tab=1">HTML</a>\n    <a ng-class="{active:tab==2,hide:!js}" ng-click="tab=2">Script</a>\n    <a ng-class="{active:tab==3,hide:!css}" ng-click="tab=3">CSS</a>\n    <a href="#" ngd-plnkr-edit>Edit</a>\n  </div>\n  <div class="tab-contents">\n    <div ng-show="tab==1">{{html}}</div>\n    <div ng-show="tab==2">{{js}}</div>\n    <div ng-show="tab==3">{{css}}</div>\n  </div>\n</div>';return{scope:{},require:"^ngdPlnkrScope",link:function(r,i,o,a){n(function(){a.moduleName=o.moduleName,r.html=a.html,r.js=a.js,r.css=a.css,o.ngInclude||(i.html(t),e(i.contents())(r))},100)}}}]);var NGD=NGD||angular.module("ngd",[]);NGD.directive("ngdSidebarBelow",function(e){return{restrict:"A",link:function(n,t,r){var i=document.querySelector(r.ngdSidebarBelow);if(!i)throw"ngd-sidebar-below, no element found by value";angular.element(e).bind("scroll",function(){var e=i.getBoundingClientRect();parseFloat(e.bottom)<0?t.css({position:"fixed",top:0}):t.css({position:"absolute",top:null})})}}}),app.directive("ngdUnsavedChangesWarning",function(e){return{restrict:"A",require:"form",link:function(n,t,r,i){var o=!1,a=r.unsavedChangesWarning||"Are You Sure?";t.bind("submit",function(){o=!0}),n.$on("$locationChangeStart",function(n){o||!i.$dirty||e.confirm(a)||n.preventDefault()})}}});var NGD=NGD||angular.module("ngd",[]);NGD.camelCase=NGD.camelCase||function(e){var n=/([\:\-\_]+(.))/g,t=/^moz([A-Z])/;return e.replace(n,function(e,n,t,r){return r?t.toUpperCase():t}).replace(t,"Moz$1")},NGD.isElementIn=function(e,n){e.length&&(e=e[0]),n.length&&(n=n[0]),"function"==typeof jQuery&&e instanceof jQuery&&(e=e[0]),"function"==typeof jQuery&&n instanceof jQuery&&(n=n[0]);var t=e.getBoundingClientRect();if("Window"==n.constructor.name)return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth);var r=n.getBoundingClientRect();return t.top>=r.top&&t.left>=r.left&&t.bottom<=r.bottom&&t.right<=r.right},NGD.service("NgdViewport",function(){return{currentEl:null,elements:{},selectorToSpy:null,attrToSpy:"id",selectorToNav:null,attrToNav:"href",classForNav:"active"}}),NGD.directive("ngdViewport",["$window","NgdViewport",function(e,n){return{link:function(t,r,i){if(n.selectorToSpy)throw"Only one ngd-viewport is allowed in a document";n.selectorToSpy=i.ngdViewport||"a[id]";var o=n.selectorToSpy.match(/\[(.*)\]/);n.attrToSpy=o[1];for(var a=r[0].querySelectorAll(n.selectorToSpy),l=0;l<a.length;l++){var d=a[l],c=d.getAttribute(n.attrToSpy);if(!c)throw"requires value in attribute, "+n.selectorToSpy+" in ng-viewport";n.elements[c]=d}var s="BODY"==r.prop("tagName")?angular.element(e):r;s.bind("scroll",function(){for(var e in n.elements){var r=n.elements[e];if(NGD.isElementIn(r,s)){n.currentEl=r,t.$apply();break}}})}}}]),NGD.directive("ngdViewportNav",["NgdViewport",function(e){return{link:function(n,t,r){if(e.selectorToNav)throw"Only one ngd-viewport-nav is allowed in a document";n.NgdViewport=e,e.selectorToNav=r.ngdViewportNav||"a[href]";var i=e.selectorToNav.match(/\[(.*)\]/);if(!i)throw"invalid selector for ngdViewportNav";e.attrToNav=i[1],n.$watch("NgdViewport.currentEl",function(n){if(n)for(var r=t[0].querySelectorAll(e.selectorToNav),i=0;i<r.length;i++){var o=angular.element(r[i]),a=r[i].getAttribute(e.attrToNav),l=n.getAttribute(e.attrToSpy);a.match(new RegExp("#"+l))?o.addClass(e.classForNav):o.removeClass(e.classForNav)}})}}}]),NGD.directive("ngdViewportNavClass",["NgdViewport",function(e){return{link:function(n,t,r){e.classForNav=r.ngdViewportNavClass}}}]),NGD.directive("ngdViewportEl",["NgdViewport",function(e){return{link:function(n,t,r){var i=""+r.ngdViewportEl==""?r.id:r.ngdViewportEl;e.elements[i]=t[0]}}}]);